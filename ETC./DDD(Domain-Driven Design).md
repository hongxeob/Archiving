# DDD란

## 도메인이란?

- 사전적 의미는 ‘영역’, ‘집합’이다.
- ‘실세계에서 사건이 발생하는 집합’ 이라고 생각하면 된다.
- DDD에서 말하는 도메인은 비즈니스 도메인을 말하며, 비즈니스 도메인은 유사한 업무의 집합이다.

## 도메인과 객체(Object)의 차이

객체의 의미는 아주 간단하게 말해서 현실 세계의 개념들을 프로그래밍에 반영하는 것을 말한다.<br>
차이는 도메인과 객체를 설명하는 범위에서 나타난다.

- `객체`는 추상화 또는 구체화할 수 있는 특정 요소만을 표현한다.
    - 객체는 현실 그대로를 표현하고 있다.
- `도메인`은 사용자가 사용하는 모든 것을 설명할 수 있다.
    - 도메인은 사용자가 바라보는 관점에 따라 각각을 구분하거나 전체라고 할 수 있다.

## DDD의 핵심 목표

- 도메인은 서로 철저히 분리 된다.
- 높은 응집력과 낮은 결합도로 변경과 확장에 용이한 설계를 얻게 된다.

## DDD의 구조 - Layerd Architecture

<img width="682" alt="image" src="https://user-images.githubusercontent.com/97447334/232196793-fb11fab2-febd-42bd-b2ce-1b4862f7a8f0.png">

`Layerd Architecture`를 구현하기 위한 두 가지 규칙

- 상위 계층은 하위 계층에 접근은 가능하지만 아래에서 위로는 불가능 하다.
- 한 계층의 관심사와 관련된 어떤 것도 다른 계층에 배치되어서는 안 된다.

## 계층별 설명

### Presentation Layer (표현 계층) (Controller)

- 사용자 요청에 대해 해석하고 응답하는 일을 책임지는 계층
- 사용자에게 UI를 제공하거나 클라이언트에 응답을 다시 보내는 역할을 하는 모든 클래스가 포함된다.
- 클라이언트로 부터 요청을 받고 응답을 반환하는 API 정의

### Application Layer (응용 계층) (Service)

- 비즈니스 로직을 정의하고 정상적으로 수행될 수 있도록 도메인 계층과 인프라스트럭쳐 계층을 연결해주는 역할을 하는 계층
- **실질적인 데이터의 상태 변화 등의 처리는 도메인 계층에서 진행할 수 있도록 위임하는 것이 중요하다.**
- `Application Layer`에 포함하는 기능들
    - 트랜잭션의 단위
    - DTO 변환
    - 엔티티 조회/저장
        - 단순하게 말하면 Entity를 찾고 (Repository), 변경 내용을 저장하는 기능(Persistence)을 호출한다. (구현은 Infra layer)
    - 사용자 인증/인가
        - 사용자가 특정 URL에 대해 권한이 있는지 정도의 인가는 `presentation layer`에서 하지만, URL만으로 판단이 어렵거나, DB내의 데이터와 대조해봐야 알 수 있는 경우(데이터 존재 여부, 중복 여부 등)
    - 파라미터 검증

### Domain Layer (도메인 계층) (Model)

- 비즈니스 규칙, 정보에 대한 실질적인 도메인에 대한 정보를 가지고 있으며 이 모든 것을 책임지는 계층
- **Entity를 활용하여 도메인 로직이 실행되며, 업무 상황을 반영하여 상태를 제어하는 역할에 집중하는 계층이다.**

### ****Infrastructure Layer(인프라 계층) (Repository)****

- 외부와의 통신 (DB, 메시징 시스템 등)을 담당하는 계층이다.
- **해당 계층에서 얻어온 정보를 `Application Layer` 또는 `Domain`계층에 전달하는 것이 주 역할이다.**

## Layerd Architecture 장단점

- 장점
    - 각 레이어를 **낮은 결합도의 형태**로 구축하면서, 각각 자신의 관심사에만 집중할 수 있다.
    - 핵심 비즈니스 로직을 순수하게 유지함으로써 **유지보수와 확장성** 측면에서 이득을 얻을 수 있다.
    - 각 레이어에 서로 다른 추상화 수준을 가진 상태와 행동을 위치시킴으로써 **코드 재사용성**을 높일 수 있다.
- 단점
    - 서비스가 커질수록 복잡도가 증가하여 확장성이 떨어진다.
    - 레이어로 분리된 관심사 외에 다른 관심사가 생길 경우 패키지 분리 및 코드 배치가 어렵다.

## ****Layered Architecture를 사용해야 하는 경우****

작고 단순하며 확장성 보다는 일관성을 가져가는 것이 목표인 애플리케이션이나 웹사이트에 적합하다.<br>
또한 단순성 및 구현 용이성으로 인해 애플리케이션 시작점으로 사용하기에 좋다.