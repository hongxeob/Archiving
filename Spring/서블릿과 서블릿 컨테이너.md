# 서블릿(Servlet)이란?
- 서블릿이란 **Dynamic Web Page(동적 페이지)를 만들 때** 사용되는 자바 기반의 웹 애플리케이션 프로그래밍 기술이다.
- 다양한 **웹 요청**과 **웹 응답**의 흐름을 간단한 메소드 호출만으로 체계적으로 다룰 수 있게 해주는 기술
## 서블릿의 주요 특징
- 클라이언트의 `Request`에 대해 동적으로 작동하는 웹 애플리케이션 컴포넌트
- HTML을 사용하여 `Response` 한다.
- JAVA의 쓰레드를 이용하여 동작한다.
- MVC 패턴에서 컨트롤러로 이용된다.
- HTTP 프로토콜 서비스를 지원하는 javax.servlet.http.HttpServlet 클래스를 상속받는다.
- UDP보다 속도가 느리다.
- HTML 변경 시 Servlet을 재 컴파일해야 하는 단점이 있다.
## 서블릿의 동작 과정
<img width="671" alt="image" src="https://user-images.githubusercontent.com/97447334/222876969-e2553b69-202d-4908-ba50-a1cfc3b34811.png"><br>
클라이언트가 Web 서버에 요청하면 웹 서버는 그 요청을 톰캣과 같은 WAS에 위임한다.<br>
그러면 WAS는 각 요청에 해당하는 서블릿을 실행한다. 그리고 서블릿은 요청에 대한 기능을 수행한 후 결과를 반환하여 클라이언트에 전송한다 

>1. 클라이언트가 URL 요청 (ex.localhost:8080/hello 입력)
>1. 서블릿 컨테이너는 `HttpServletRequest`, `HttpServletResponse` 객체 생성
>2. `Web.xml`이 어느 서블릿에 대해 요청한 것인지 탐색 (ex. helloServlet을 찾는다)
>3. 해당하는 서블릿에서 `service()` 메소드 호출
>4. `doGet()` 또는 `doPost()` 호출
>5. 동적 페이지 생성 후 `HttpServletResponse` 객체에 응답 전송
>6. `HttpServletRequest`, `HttpServletResponse` 객체 소멸<br>
>
>※ `web.xml` : 서블릿을 작성했다면 해당 서블릿을 사용자가 요청한 경로와 맵핑시켜야 WAS에서 맵핑된 정보를 읽어서 브라우저에서 해당 URL로 HTTP요청 시 해당 서블릿으로 요청을 전달해 줄 수 있다.<br> 소스를 분석할 때도 가장 먼저 확인해봐야 할 부분이다.
톰캣을 예로 들면 웹 어플리케이션 서비스 처리에 대해 정의된 환경 설정 파일이 server디렉터리의 web.xml에 있다.

## 서블릿의 생명주기
- 클라이언트 요청이 들어오면 컨테이너는 서블릿이 메모리에 있는지 확인한다.
    - 메모리에 없다면 `init()`메소드를 호출하여 생성
- 클라이언트 요청에 따라서 `service()` 메소드를 통해 요청에 대한 응답이 `doGet()`,`doPost()`로 분기
    - 이때 `HttpServletRequest`, `HttpServletResponse` 에 의해 request, response 객체가 제공된다.
- 컨테이너가 서블릿에 종료 요청을 하면 `destroy()` 메소드가 호출된다.
    - 종료시 처리해야 하는 작업은 `destroy()` 메소드를 오버라이딩하여 구현하면 된다.
# 서블릿 컨테이너(****Servlet Container)****
## 서블릿 컨테이너란?
- 스스로 동작하지 않는 서블릿을 관리해주는 컨테이너이다.
- 클라이언트의 요청을 받고 응답할 수 있도록 웹 서버와 소켓으로 통신한다.
- ex) 톰캣
## 서블릿 컨테이너 특징
- 톰캣처럼 서블릿을 지원하는 WAS를 서블릿 컨테이너라고 한다.
- 서블릿 객체를 생성,초기화,호출,종료하는 생명주기를 관리한다.
- 서블릿 객체는 싱글톤으로 관리된다.
    - 싱글톤이 아니라면 같은 구현체를 사용한다해도, requset(쓰레드)가 다르다면 하나씩 구현체가 생기게 되어서 싱글톤으로 관리된다.
- 동시 요청을 위한 **멀티 쓰레드** 처리 지원
## 서블릿 컨테이너의 역할
- **웹 서버와 통신을 지원한다.**
    - 서블릿 컨테이너는 서블릿과 웹 서버가 통신할 수 있게 해준다.
    - 서블릿 컨테이너가 웹 서버와 통신하는 과정을 생략할 수 있게 해주기 때문에 개발자는 비즈니스 로직에만 집중하면 된다.
- **서블릿 생명주기를 관리한다.**
    - 서블릿의 생성,소멸을 관리한다.
    - 서블릿을 로딩하며 인스턴스화하고 초기화 메소드를 호출한다.
    - 요청이 들어오면 적절한 메소드를 호출한다.
    - 서블릿의 역할이 끝난후 GC(Garbage Collection)를 진행하여 소멸시킨다
- **멀티쓰레드를 지원 및 관리한다.**
    - 서블릿 컨테이너는 요청마다 자바 쓰레드를 새롭게 생성한다.
    - HTTP 서비스 메소드를 실행하고 나면 쓰레드는 죽게된다.
    - 서버가 다중 쓰레드를 생성 및 운영해주니 쓰레드 안정성은 고려하지 않아도 된다
>**쓰레드란**
>- 애플리케이션 코드를 하나하나 순차적으로 실행하는 것
>- 자바 메인 메서드를 처음 실행하면 main이라는 이름의 쓰레드가 실행
>- 쓰레드가 없다면 자바 애플리케이션 실행이 불가능
>- 쓰레드는 한 번에 하나의 코드 라인만 수행
>- 동시 처리가 필요하면 쓰레드를 추가로 생성