## 트랜잭션을 추상화하는 이유

1. 트랜잭션을 사용하는 코드는 데이터 접근 기술마다 다르다.
2. 따라서 데이터 접근 기술이 바뀌면 서비스 계층의 코드도 바뀐다.
3. 이것은 OCP 원칙을 위반한다.

## 트랜잭션 추상화

- 트랜잭션은 단순하다. 트랜잭션을 시작하고 비즈니스 로직이 끝난 후 커밋이나 롤백을 수행하면 된다.
- 따라서 이 인터페이스를 기반으로 각 데이터 접근 기술에 적합한 구현체를 만들면 된다.

```java
public interface TxManager {
    begin();
    commit();
    rollback();
}
```

![image](https://user-images.githubusercontent.com/97447334/229276348-2692e15c-6b97-4f46-882f-051fae7fb16a.png)

- 서비스는 이제 특정 트랜잭션 기술에 직접 의존하는 것이 아니라 TxManager라는 추상화된 인터페이스에 의존한다.
- 실제 구현체는 DI를 통해 주입한다.
- 클라이언트인 서비스는 TxManager에 의존하고 DI를 사용함으로써 OCP 원칙을 지키게 되었다.

스프링에서는 이미 이런 고민을 다 해두었고, 스프링이 제공하는 트랜잭션 추상화 기술을 사용하면 된다.(`PlatformTransactionManager`)