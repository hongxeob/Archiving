## ORM 이란

>Object Relational Mapping, 객체-관계-매핑의 의미이다.

- 객체와 관계형 데이터베이스의 데이터를 자동으로 **매핑**(연결)해주는 것을 말한다.
    - 객체 지향 프로그래밍은 `클래스`를 사용하고, 관계형 데이터베이스는 `테이블`을 사용한다.
    - 객체 모델과 관계형 모델 간의 불일치가 존재한다.
    - ORM을 통해 객체 간의 관계를 바탕으로 SQL을 자동으로 생성하여 불일치를 해결한다.
- 데이터베이스 데이터 ←매핑→ Object 필드
    - 객체를 통해 간접적으로 데이터베이스 데이터를 다룬다.

## ORM 사용 이유

- OOP vs 관계형 데이터베이스
- 객체 지향 프로그래밍은 `클래스`를 사용하고, 관계형 데이터베이스는 `테이블`을 이용하는데 객체 모델과 관계형 모델 간의 불일치가 존재한다.
- 데이터베이스 접근을 프로그래밍 언어의 관점에서 맞출 수 있다.
- 객체 간의 관계를 바탕으로 SQL을 자동으로 생성하여 불일치를 해결한다.
- SQL문을 직접 작성하지 않고 엔티티를 객체로 표현할 수 있다.
- 객체를 간접적으로 데이터베이스를 다룬다.

## ORM 장점

### 1️⃣ 직관적인 코드(가독성) + 비즈니스 로직에 집중 가능 (생산성)

- ORM을 이용하면 SQL 쿼리가 아닌 메소드로 데이터를 조작할 수 있다.
- 이로써 프로그래머가 객체 모델로 프로그래밍하는 것에 더 집중할 수 있게 도와준다.
- 각종 객체에 대한 코드를 별도로 작성하기 때문에 코드 가독성을 높여준다.
- SQL의 절차적이고 순차적인 접근이 아닌 객체 지향적인 접근으로 생산성이 증가한다.

### 2️⃣ 재사용 및 유지보수 편리성 증가

- ORM은 디자인 패턴을 견고하게 만드는 데 유리하다.
    - ORM은 독립적으로 작성되었고 해당 객체들을 재활용 할 수 있기 때문이다.

### 3️⃣ DBMS에 대한 종속성 저하

- 객체 간 관계를 바탕으로 SQL을 자동으로 생성하기 때문에 RDBMS의 데이터 구조와 프로그래밍 언어의 객체 모델 사이의 간격을 좁힌다.
- 대부분의 ORM 솔루션은 DB에 종속적이지 않다.
- 프로그래머는 객체에 집중하므로 DBMS를 다루는 큰 작업에도 비교적 적은 리스크와 시간만 소요할 수 있다.

## ORM 단점

### 완벽한 ORM으로만 서비스를 구현하기가 어렵다.

- 프로젝트의 복잡성이나 규모가 커질 경우 난이도 또한 올라갈 수 있다.
- 사용하기에는 편리하지만 설계는 신중하게 해야한다.
- 일부 자주 사용되는 대형 쿼리는 속도를 위해 별도의 튜닝이 필요한 경우가 있다.

### 객체-관계간의 불일치

다음과 같은 특성에서 객체-관계 간의 불일치가 생긴다.

- **세분성 (Granularity)**
    - 경우에 따라서 데이터베이스에 있는 테이블 수보다 더 많은 클래스를 가진 모델이 생길 수 있다.
- **상속성 (Inheritance)**
    - RDBMS는 객체지향 프로그래밍 언어의 특징인 상속 개념이 없다.
    - JPA에서는 이와 관련된 해결책이 몇 가지 있다. (조인 전략, 단일 테이블 사용 전략, 어노테이션 사용 등)
- **연관성 (Associations)**
    - 객체지향 언어는 방향성이 있는 객체의 참조(reference)를 사용하여 연관성을 나타내지만 RDBMS는 방향성이 없는 외래키(foreign key)를 이용해서 나타낸다.
- **탐색 (Navigation)**
    - 자바와 RDBMS에서 객체를 접근하는 방법이 근본적으로 다르다.
    - 자바는 그래프형태로 하나의 연결에서 다른 연결로 이동하며 탐색한다.
    - 그러나 RDBMS에서는 일반적으로 SQL문을 최소화 하고 `JOIN` 을 통해 여러 엔티티를 로드하고 원하는 대상 엔티티를 선택하는 방식으로 탐색한다.

## ORM 프레임워크

- **JPA (Java Persistence API)**
    - 자바의 ORM 기술 표준으로 인터페이스의 모음이다.
    - 이러한 JPA 표준 명세를 구현한 구현체가 바로 Hibernate이다.
- Django ORM
    - 파이썬 기반 프레임워크인 쟝고에서 자체적으로 지원하는 ORM이다.